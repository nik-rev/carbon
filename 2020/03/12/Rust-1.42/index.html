<!doctype html><html data-theme=dark lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta media="(prefers-color-scheme: light)" content=#418001 name=theme-color><meta media="(prefers-color-scheme: dark)" content=#cbefa6 name=theme-color><title>
        Carbon's Blog | Announcing Rust 1.42.0
      </title><link href="https://carbon.nikrev.com/css/index.css?h=3e22f41332e248e40d6e" rel=stylesheet><script defer src=/js/code_blocks.js></script><script defer src=/js/theme_toggle.js></script><meta content="Nik Revenco" name=author><meta value="Announcing Rust 1.42.0" key=title property=og-image-generator><meta content="Carbon's Blog | Announcing Rust 1.42.0" property=og:title><meta content="A minimalistic Zola theme" property=og:description><meta content="Carbon's Blog | Announcing Rust 1.42.0" itemprop=headline><meta content="A minimalistic Zola theme" name=description><meta content=https://carbon.nikrev.com/2020/03/12/Rust-1.42/ property=og:url><meta content=summary_large_image name=og:type><meta content=summary_large_image property=twitter:card><meta content="Carbon's Blog | Announcing Rust 1.42.0" property=twitter:title><meta content=https://carbon.nikrev.com/2020/03/12/Rust-1.42/og.png property=og:image><meta content="Carbon's Blog | Announcing Rust 1.42.0" property=og:image:alt><meta content=1280 property=og:image:width><meta content=675 property=og:image:height><meta content=1280 property=twitter:image:width><meta content=675 property=twitter:image:height><body><div id=site><header class=header><div class=header__heading><h1 class=header__heading__title> Carbon's Blog</h1><div class=header__heading__icon-container><button aria-label="Change to light theme" title="Change to light theme" class=header__heading__theme-toggle type=button>  <svg viewbox="0 0 512 512" class=header__heading__theme-toggle__icon fill=currentColor stroke=currentColor stroke-width=0 xmlns=http://www.w3.org/2000/svg><path d="M264 480A232 232 0 0 1 32 248c0-94 54-178.28 137.61-214.67a16 16 0 0 1 21.06 21.06C181.07 76.43 176 104.66 176 136c0 110.28 89.72 200 200 200 31.34 0 59.57-5.07 81.61-14.67a16 16 0 0 1 21.06 21.06C442.28 426 358 480 264 480z"></path></svg></button><button aria-label="RSS Feed" title="RSS Feed" class=header__heading__rss type=button><a href=https://carbon.nikrev.com/atom.xml> <svg viewbox="0 0 512 512" class=header__heading__rss__icon fill=currentColor stroke=currentColor stroke-width=0 xmlns=http://www.w3.org/2000/svg><path d="M119.9 336.1c-30.8 0-55.9 25.1-55.9 55.8 0 30.8 25.1 55.6 55.9 55.6 30.9 0 55.9-24.9 55.9-55.6 0-30.7-25-55.8-55.9-55.8z"></path><path d="M64 192v79.9c48 0 94.1 14.2 128 48.1 33.9 33.9 48 79.9 48 128h80c0-139.9-116-256-256-256z"></path><path d="M64 64v79.9c171 0 303.9 133 303.9 304.1H448C448 236.3 276 64 64 64z"></path></svg> </a></button></div></div><nav><ul class=header__links><li><a class=header__links__link href=/> /home </a><li><a class=header__links__link href=/features> /features </a><li><a class=header__links__link href=/blog> /blog </a><li><a class=header__links__link href=/installation> /installation.md </a></ul></nav></header><main class=post-content><h1 class=post-content__title>Announcing Rust 1.42.0</h1><p class=post-content__date>12 March, 2020<p>The Rust team is happy to announce a new version of Rust, 1.42.0. Rust is a programming language that is empowering everyone to build reliable and efficient software.<p>If you have a previous version of Rust installed via rustup, getting Rust 1.42.0 is as easy as:<pre class=z-code><code><span class="z-text z-plain">$ rustup update stable
</span></code></pre><p>If you don’t have it already, you can <a href=https://www.rust-lang.org/install.html>get <code>rustup</code></a> from the appropriate page on our website, and check out the <a href=https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1420-2020-03-12>detailed release notes for 1.42.0</a> on GitHub.<h2 id=what-s-in-1-42-0-stable><a aria-label="Anchor link for: what-s-in-1-42-0-stable" class=zola-anchor href=#what-s-in-1-42-0-stable>What’s in 1.42.0 stable</a></h2><p>The highlights of Rust 1.42.0 include: more useful panic messages when <code>unwrap</code>ping, subslice patterns, the deprecation of <code>Error::description</code>, and more. See the <a href=https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1420-2020-03-12>detailed release notes</a> to learn about other changes not covered by this post.<h3 id=useful-line-numbers-in-option-and-result-panic-messages><a aria-label="Anchor link for: useful-line-numbers-in-option-and-result-panic-messages" class=zola-anchor href=#useful-line-numbers-in-option-and-result-panic-messages>Useful line numbers in <code>Option</code> and <code>Result</code> panic messages</a></h3><p>In Rust 1.41.1, calling <code>unwrap()</code> on an <code>Option::None</code> value would produce an error message looking something like this:<pre class=z-code><code><span class="z-text z-plain">thread 'main' panicked at 'called `Option::unwrap()` on a `None` value', /.../src/libcore/macros/mod.rs:15:40
</span></code></pre><p>Similarly, the line numbers in the panic messages generated by <code>unwrap_err</code>, <code>expect</code>, and <code>expect_err</code>, and the corresponding methods on the <code>Result</code> type, also refer to <code>core</code> internals.<p>In Rust 1.42.0, all eight of these functions produce panic messages that provide the line number where they were invoked. The new error messages look something like this:<pre class=z-code><code><span class="z-text z-plain">thread 'main' panicked at 'called `Option::unwrap()` on a `None` value', src/main.rs:2:5
</span></code></pre><p>This means that the invalid call to <code>unwrap</code> was on line 2 of <code>src/main.rs</code>.<p>This behavior is made possible by an annotation, <code>#[track_caller]</code>. This annotation is not yet available to use in stable Rust; if you are interested in using it in your own code, you can follow its progress by watching <a href=https://github.com/rust-lang/rust/issues/47809>this tracking issue</a>.<h3 id=subslice-patterns><a aria-label="Anchor link for: subslice-patterns" class=zola-anchor href=#subslice-patterns>Subslice patterns</a></h3><p>In Rust 1.26, we stabilized “<a href=https://blog.rust-lang.org/2018/05/10/Rust-1.26.html#basic-slice-patterns>slice patterns</a>,” which let you <code>match</code> on slices. They looked like this:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">foo</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">words</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>[<span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-type z-rust">str</span>]</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">match</span> words <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>empty slice!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>one<span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>one element: <span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> one<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>one<span class="z-punctuation z-separator z-rust">,</span> two<span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>two elements: <span class="z-constant z-other z-placeholder z-rust">{:?}</span> <span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> one<span class="z-punctuation z-separator z-rust">,</span> two<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-rust">_</span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>I'm not sure how many elements!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>This allowed you to match on slices, but was fairly limited. You had to choose the exact sizes you wished to support, and had to have a catch-all arm for size you didn’t want to support.<p>In Rust 1.42, we have <a href=https://github.com/rust-lang/rust/pull/67712/>expanded support for matching on parts of a slice</a>:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">foo</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">words</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>[<span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-type z-rust">str</span>]</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">match</span> words <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Hello<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>World<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Hello World!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Foo<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Bar<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>Baz<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        rest <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> rest<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>The <code>..</code> is called a “rest pattern,” because it matches the rest of the slice. The above example uses the rest pattern at the end of a slice, but you can also use it in other ways:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">foo</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">words</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>[<span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-type z-rust">str</span>]</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">match</span> words <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Ignore everything but the last element, which must be "!".
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-range z-rust">..</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>!!!<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `start` is a slice of everything except the last element, which must be "z".
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>start <span class="z-keyword z-operator z-rust">@</span> <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>z<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>starts with: <span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> start<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `end` is a slice of everything but the first element, which must be "a".
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>a<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-separator z-rust">,</span> end <span class="z-keyword z-operator z-rust">@</span> <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>ends with: <span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> end<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        rest <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> rest<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>If you’re interested in learning more, we published <a href=https://blog.rust-lang.org/inside-rust/2020/03/04/recent-future-pattern-matching-improvements.html>a post on the Inside Rust blog</a> discussing these changes as well as more improvements to pattern matching that we may bring to stable in the future! You can also read more about slice patterns in <a href=https://thomashartmann.dev/blog/feature(slice_patterns)/>Thomas Hartmann’s post</a>.<h3 id=matches><a aria-label="Anchor link for: matches" class=zola-anchor href=#matches><a href=https://doc.rust-lang.org/stable/std/macro.matches.html><code>matches!</code></a></a></h3><p>This release of Rust stabilizes a new macro, <a href=https://doc.rust-lang.org/nightly/std/macro.matches.html><code>matches!</code></a>. This macro accepts an expression and a pattern, and returns true if the pattern matches the expression. In other words:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Using a match expression:
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> <span class="z-variable z-language z-rust">self</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">partial_cmp</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>other</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Less</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-constant z-language z-rust">true</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-rust">_</span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-constant z-language z-rust">false</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Using the `matches!` macro:
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">matches!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-variable z-language z-rust">self</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">partial_cmp</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>other</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Less</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre><p>You can also use features like <code>|</code> patterns and <code>if</code> guards:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> foo <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-string z-quoted z-single z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">'</span>f<span class="z-punctuation z-definition z-string z-end z-rust">'</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-macro z-rust">matches!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>foo<span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-single z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">'</span>A<span class="z-punctuation z-definition z-string z-end z-rust">'</span></span><span class="z-keyword z-operator z-range z-rust">..</span><span class="z-keyword z-operator z-assignment z-rust">=</span><span class="z-string z-quoted z-single z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">'</span>Z<span class="z-punctuation z-definition z-string z-end z-rust">'</span></span> <span class="z-keyword z-operator z-bitwise z-rust">|</span> <span class="z-string z-quoted z-single z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">'</span>a<span class="z-punctuation z-definition z-string z-end z-rust">'</span></span><span class="z-keyword z-operator z-range z-rust">..</span><span class="z-keyword z-operator z-assignment z-rust">=</span><span class="z-string z-quoted z-single z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">'</span>z<span class="z-punctuation z-definition z-string z-end z-rust">'</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> bar <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">4</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-macro z-rust">matches!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>bar<span class="z-punctuation z-separator z-rust">,</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>x</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-control z-rust">if</span> x <span class="z-keyword z-operator z-comparison z-rust">></span> <span class="z-constant z-numeric z-integer z-decimal z-rust">2</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><h3 id=use-proc-macro-tokenstream-now-works><a aria-label="Anchor link for: use-proc-macro-tokenstream-now-works" class=zola-anchor href=#use-proc-macro-tokenstream-now-works><code>use proc_macro::TokenStream;</code> now works</a></h3><p>In Rust 2018, we <a href=https://doc.rust-lang.org/stable/edition-guide/rust-2018/module-system/path-clarity.html#no-more-extern-crate>removed the need for <code>extern crate</code></a>. But procedural macros were a bit special, and so when you were writing a procedural macro, you still needed to say <code>extern crate proc_macro;</code>.<p>In this release, if you are using Cargo, <a href=https://github.com/rust-lang/cargo/pull/7700>you no longer need this line when working with the 2018 edition; you can use <code>use</code> like any other crate</a>. Given that most projects will already have a line similar to <code>use proc_macro::TokenStream;</code>, this change will mean that you can delete the <code>extern crate proc_macro;</code> line and your code will still work. This change is small, but brings procedural macros closer to regular code.<h3 id=libraries><a aria-label="Anchor link for: libraries" class=zola-anchor href=#libraries>Libraries</a></h3><ul><li><a href=https://github.com/rust-lang/rust/pull/68348/><code>iter::Empty&LTT></code> now implements <code>Send</code> and <code>Sync</code> for any <code>T</code>.</a><li><a href=https://github.com/rust-lang/rust/pull/67935/><code>Pin::{map_unchecked, map_unchecked_mut}</code> no longer require the return type to implement <code>Sized</code>.</a><li><a href=https://github.com/rust-lang/rust/pull/67233/><code>io::Cursor</code> now implements <code>PartialEq</code> and <code>Eq</code>.</a><li><a href=https://github.com/rust-lang/rust/pull/66254/><code>Layout::new</code> is now <code>const</code>.</a></ul><h3 id=stabilized-apis><a aria-label="Anchor link for: stabilized-apis" class=zola-anchor href=#stabilized-apis>Stabilized APIs</a></h3><ul><li><a href=https://doc.rust-lang.org/stable/std/sync/struct.Condvar.html#method.wait_while><code>CondVar::wait_while</code></a> & <a href=https://doc.rust-lang.org/stable/std/sync/struct.Condvar.html#method.wait_timeout_while><code>CondVar::wait_timeout_while</code></a><li><a href=https://doc.rust-lang.org/stable/std/fmt/struct.DebugMap.html#method.key><code>DebugMap::key</code></a> & <a href=https://doc.rust-lang.org/stable/std/fmt/struct.DebugMap.html#method.value><code>DebugMap::value</code></a><li><a href=https://doc.rust-lang.org/stable/std/mem/struct.ManuallyDrop.html#method.take><code>ManuallyDrop::take</code></a><li><a href=https://doc.rust-lang.org/stable/std/ptr/fn.slice_from_raw_parts_mut.html><code>ptr::slice_from_raw_parts_mut</code></a> & <a href=https://doc.rust-lang.org/stable/std/ptr/fn.slice_from_raw_parts.html><code>ptr::slice_from_raw_parts</code></a></ul><h3 id=other-changes><a aria-label="Anchor link for: other-changes" class=zola-anchor href=#other-changes>Other changes</a></h3><p>There are other changes in the Rust 1.42.0 release: check out what changed in <a href=https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1420-2020-03-12>Rust</a>, <a href=https://doc.rust-lang.org/nightly/cargo/CHANGELOG.html#cargo-142-2020-03-12>Cargo</a>, and <a href=https://github.com/rust-lang/rust-clippy/blob/master/CHANGELOG.md#rust-142>Clippy</a>.<h3 id=compatibility-notes><a aria-label="Anchor link for: compatibility-notes" class=zola-anchor href=#compatibility-notes>Compatibility Notes</a></h3><p>We have two notable compatibility notes this release: a deprecation in the standard library, and a demotion of 32-bit Apple targets to Tier 3.<h4 id=error-description-is-deprecated><a aria-label="Anchor link for: error-description-is-deprecated" class=zola-anchor href=#error-description-is-deprecated>Error::Description is deprecated</a></h4><p>Sometimes, mistakes are made. The <code>Error::description</code> method is now considered to be one of those mistakes. The problem is with its type signature:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">description</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&</span><span class="z-variable z-parameter z-rust">self</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-type z-rust">str</span>
</span></span></span></code></pre><p>Because <code>description</code> returns a <code>&str</code>, it is not nearly as useful as we wished it would be. This means that you basically need to return the contents of an <code>Error</code> verbatim; if you wanted to say, use formatting to produce a nicer description, that is impossible: you’d need to return a <code>String</code>. Instead, error types should implement the <code>Display</code>/<code>Debug</code> traits to provide the description of the error.<p>This API has existed since Rust 1.0. We’ve been working towards this goal for a long time: back in Rust 1.27, we <a href=https://github.com/rust-lang/rust/pull/50163>“soft deprecated” this method</a>. What that meant in practice was, we gave the function a default implementation. This means that users were no longer forced to implement this method when implementing the <code>Error</code> trait. In this release, <a href=https://github.com/rust-lang/rust/pull/66919/>we mark it as <em>actually</em> deprecated</a>, and took some steps to de-emphasize the method in <code>Error</code>’s documentation. Due to our stability policy, <code>description</code> will never be removed, and so this is as far as we can go.<h4 id=downgrading-32-bit-apple-targets><a aria-label="Anchor link for: downgrading-32-bit-apple-targets" class=zola-anchor href=#downgrading-32-bit-apple-targets>Downgrading 32-bit Apple targets</a></h4><p>Apple is no longer supporting 32-bit targets, and so, neither are we. They have been downgraded to Tier 3 support by the project. For more details on this, check out <a href=https://blog.rust-lang.org/2020/01/03/reducing-support-for-32-bit-apple-targets.html>this post</a> from back in January, which covers everything in detail.<h2 id=contributors-to-1-42-0><a aria-label="Anchor link for: contributors-to-1-42-0" class=zola-anchor href=#contributors-to-1-42-0>Contributors to 1.42.0</a></h2><p>Many people came together to create Rust 1.42.0. We couldn’t have done it without all of you. <a href=https://thanks.rust-lang.org/rust/1.42.0/>Thanks!</a></main><footer><p>Powered by <a href=https://github.com/getzola/zola>Zola</a> and <a href=https://github.com/nik-rev/carbon>nik-rev/carbon</a></footer></div>